2018-12-10 21:38:39.8269 DEBUG Opening database connection for new ticket...
2018-12-10 21:39:18.8242 DEBUG Adding Ticket to database...
2018-12-10 21:39:28.4722 DEBUG Saving changes to database...
2018-12-10 21:39:28.6674 ERROR System.InvalidOperationException: Saving or accepting changes failed because more than one entity of type 'Support_Ticket_System.User' have the same primary key value. Ensure that explicitly set primary key values are unique. Ensure that database-generated primary keys are configured correctly in the database and in the Entity Framework model. Use the Entity Designer for Database First/Model First configuration. Use the 'HasDatabaseGeneratedOption" fluent API or 'DatabaseGeneratedAttribute' for Code First configuration.
   at System.Data.Entity.Core.Objects.ObjectStateManager.FixupKey(EntityEntry entry)
   at System.Data.Entity.Core.Objects.EntityEntry.AcceptChanges()
   at System.Data.Entity.Core.Objects.ObjectContext.AcceptAllChanges()
   at System.Data.Entity.Core.Objects.ObjectContext.SaveChangesToStore(SaveOptions options, IDbExecutionStrategy executionStrategy, Boolean startLocalTransaction)
2018-12-10 21:39:35.6867 DEBUG Opening connection to database to print all tickets...
2018-12-10 21:39:35.7406 DEBUG Execute query to retrieve all tickets...
2018-12-10 21:49:53.7370 DEBUG Setting the display and display size...
2018-12-10 21:49:53.7988 DEBUG Starting the Program...
2018-12-10 21:49:58.0648 DEBUG Opening connection to database to print all tickets...
2018-12-10 21:50:01.8288 DEBUG Execute query to retrieve all tickets...
2018-12-10 21:50:12.6971 DEBUG Opening connection to database to print all users...
2018-12-10 21:50:16.0341 DEBUG Opening database connection for new ticket...
2018-12-10 21:50:54.1324 DEBUG Adding Ticket to database...
2018-12-10 21:50:59.8044 DEBUG Saving changes to database...
2018-12-10 21:51:00.4211 WARN So, the ticket is being created successfully, but EF has an issue with the 'User' objects within 'WatchingUser'. The database context isn't tracking the objects, since there is more than one context used throughout this application.The fix for this would be to set the foreign key in 'watchingUser' instead of 'User' in 'WatchingUser', except that EF cannot correctly link the foreign keys for some reason. Using the stored procedure spUpsertUser, I have worked around this. The only problem is that EF expects the 'User' in 'WatchingUser' to be new Users, so when EF sees that the UserID is the same for multiple 'User' objects, it throws an 'InvalidOperationException.
2018-12-10 21:51:05.8117 DEBUG Opening connection to database to print all tickets...
2018-12-10 21:51:05.8719 DEBUG Execute query to retrieve all tickets...
2018-12-10 21:51:19.8438 DEBUG Opening connection to database to retrieve and update ticket...
2018-12-10 21:51:38.2248 ERROR System.InvalidOperationException: The object cannot be deleted because it was not found in the ObjectStateManager.
   at System.Data.Entity.Core.Objects.ObjectContext.DeleteObject(Object entity, EntitySet expectedEntitySet)
   at System.Data.Entity.Core.Objects.ObjectContext.DeleteObject(Object entity)
   at System.Data.Entity.Internal.Linq.InternalSet`1.RemoveRange(IEnumerable entities)
   at System.Data.Entity.DbSet`1.RemoveRange(IEnumerable`1 entities)
   at Support_Ticket_System.SupportTicketSystem.GetCorrectTicketInput(String subHeader, TicketDBContext db, Ticket ticket) in C:\Users\Joshua Rauch\source\repos\.Net-Database-Programming\Support Ticket System\SupportTicketSystem.cs:line 748
   at Support_Ticket_System.SupportTicketSystem.UpdateTicket() in C:\Users\Joshua Rauch\source\repos\.Net-Database-Programming\Support Ticket System\SupportTicketSystem.cs:line 382
2018-12-10 21:59:00.3471 DEBUG Setting the display and display size...
2018-12-10 21:59:00.4548 DEBUG Starting the Program...
2018-12-10 21:59:04.5988 DEBUG Opening database connection for new ticket...
2018-12-10 21:59:26.4051 DEBUG Adding Ticket to database...
2018-12-10 21:59:28.5912 DEBUG Saving changes to database...
2018-12-10 21:59:29.0535 ERROR System.InvalidOperationException: Saving or accepting changes failed because more than one entity of type 'Support_Ticket_System.User' have the same primary key value. Ensure that explicitly set primary key values are unique. Ensure that database-generated primary keys are configured correctly in the database and in the Entity Framework model. Use the Entity Designer for Database First/Model First configuration. Use the 'HasDatabaseGeneratedOption" fluent API or 'DatabaseGeneratedAttribute' for Code First configuration.
   at System.Data.Entity.Core.Objects.ObjectStateManager.FixupKey(EntityEntry entry)
   at System.Data.Entity.Core.Objects.EntityEntry.AcceptChanges()
   at System.Data.Entity.Core.Objects.ObjectContext.AcceptAllChanges()
   at System.Data.Entity.Core.Objects.ObjectContext.SaveChangesToStore(SaveOptions options, IDbExecutionStrategy executionStrategy, Boolean startLocalTransaction)
2018-12-10 21:59:33.7869 DEBUG Opening connection to database to print all users...
2018-12-10 22:16:29.8676 DEBUG Setting the display and display size...
2018-12-10 22:16:29.9714 DEBUG Starting the Program...
2018-12-10 22:16:32.6861 DEBUG Opening connection to database to print all tickets...
2018-12-10 22:16:36.5328 DEBUG Execute query to retrieve all tickets...
2018-12-10 22:16:40.8246 DEBUG Opening database connection for new ticket...
2018-12-10 22:16:58.6847 DEBUG Adding Ticket to database...
2018-12-10 22:16:58.7084 DEBUG Saving changes to database...
2018-12-10 22:16:59.1167 ERROR System.InvalidOperationException: Saving or accepting changes failed because more than one entity of type 'Support_Ticket_System.User' have the same primary key value. Ensure that explicitly set primary key values are unique. Ensure that database-generated primary keys are configured correctly in the database and in the Entity Framework model. Use the Entity Designer for Database First/Model First configuration. Use the 'HasDatabaseGeneratedOption" fluent API or 'DatabaseGeneratedAttribute' for Code First configuration.
   at System.Data.Entity.Core.Objects.ObjectStateManager.FixupKey(EntityEntry entry)
   at System.Data.Entity.Core.Objects.EntityEntry.AcceptChanges()
   at System.Data.Entity.Core.Objects.ObjectContext.AcceptAllChanges()
   at System.Data.Entity.Core.Objects.ObjectContext.SaveChangesToStore(SaveOptions options, IDbExecutionStrategy executionStrategy, Boolean startLocalTransaction)
2018-12-10 22:18:37.5041 DEBUG Setting the display and display size...
2018-12-10 22:18:37.5540 DEBUG Starting the Program...
2018-12-10 22:18:39.1257 DEBUG Opening database connection for new ticket...
2018-12-10 22:19:00.1479 DEBUG Adding Ticket to database...
2018-12-10 22:19:00.2007 DEBUG Saving changes to database...
2018-12-10 22:19:00.6981 ERROR System.InvalidOperationException: Saving or accepting changes failed because more than one entity of type 'Support_Ticket_System.User' have the same primary key value. Ensure that explicitly set primary key values are unique. Ensure that database-generated primary keys are configured correctly in the database and in the Entity Framework model. Use the Entity Designer for Database First/Model First configuration. Use the 'HasDatabaseGeneratedOption" fluent API or 'DatabaseGeneratedAttribute' for Code First configuration.
   at System.Data.Entity.Core.Objects.ObjectStateManager.FixupKey(EntityEntry entry)
   at System.Data.Entity.Core.Objects.EntityEntry.AcceptChanges()
   at System.Data.Entity.Core.Objects.ObjectContext.AcceptAllChanges()
   at System.Data.Entity.Core.Objects.ObjectContext.SaveChangesToStore(SaveOptions options, IDbExecutionStrategy executionStrategy, Boolean startLocalTransaction)
2018-12-10 22:24:42.0744 DEBUG Setting the display and display size...
2018-12-10 22:24:42.1402 DEBUG Starting the Program...
2018-12-10 22:24:44.0905 DEBUG Opening database connection for new ticket...
2018-12-10 22:25:10.1799 DEBUG Adding Ticket to database...
2018-12-10 22:25:10.2258 DEBUG Saving changes to database...
2018-12-10 22:25:10.9937 ERROR System.InvalidOperationException: Saving or accepting changes failed because more than one entity of type 'Support_Ticket_System.User' have the same primary key value. Ensure that explicitly set primary key values are unique. Ensure that database-generated primary keys are configured correctly in the database and in the Entity Framework model. Use the Entity Designer for Database First/Model First configuration. Use the 'HasDatabaseGeneratedOption" fluent API or 'DatabaseGeneratedAttribute' for Code First configuration.
   at System.Data.Entity.Core.Objects.ObjectStateManager.FixupKey(EntityEntry entry)
   at System.Data.Entity.Core.Objects.EntityEntry.AcceptChanges()
   at System.Data.Entity.Core.Objects.ObjectContext.AcceptAllChanges()
   at System.Data.Entity.Core.Objects.ObjectContext.SaveChangesToStore(SaveOptions options, IDbExecutionStrategy executionStrategy, Boolean startLocalTransaction)
2018-12-10 22:26:11.3205 DEBUG Setting the display and display size...
2018-12-10 22:26:11.3773 DEBUG Starting the Program...
2018-12-10 22:26:16.1543 DEBUG Opening database connection for new ticket...
2018-12-10 22:26:34.8591 DEBUG Adding Ticket to database...
2018-12-10 22:26:34.9079 DEBUG Saving changes to database...
2018-12-10 22:26:35.3016 ERROR System.InvalidOperationException: Saving or accepting changes failed because more than one entity of type 'Support_Ticket_System.User' have the same primary key value. Ensure that explicitly set primary key values are unique. Ensure that database-generated primary keys are configured correctly in the database and in the Entity Framework model. Use the Entity Designer for Database First/Model First configuration. Use the 'HasDatabaseGeneratedOption" fluent API or 'DatabaseGeneratedAttribute' for Code First configuration.
   at System.Data.Entity.Core.Objects.ObjectStateManager.FixupKey(EntityEntry entry)
   at System.Data.Entity.Core.Objects.EntityEntry.AcceptChanges()
   at System.Data.Entity.Core.Objects.ObjectContext.AcceptAllChanges()
   at System.Data.Entity.Core.Objects.ObjectContext.SaveChangesToStore(SaveOptions options, IDbExecutionStrategy executionStrategy, Boolean startLocalTransaction)
2018-12-10 22:28:14.5331 DEBUG Setting the display and display size...
2018-12-10 22:28:14.5950 DEBUG Starting the Program...
2018-12-10 22:29:18.5487 DEBUG Setting the display and display size...
2018-12-10 22:29:18.6165 DEBUG Starting the Program...
2018-12-10 22:29:20.6945 DEBUG Opening database connection for new ticket...
2018-12-10 22:29:47.4544 ERROR System.InvalidOperationException: The entity type List`1 is not part of the model for the current context.
   at System.Data.Entity.Internal.InternalContext.UpdateEntitySetMappingsForType(Type entityType)
   at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)
   at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()
   at System.Data.Entity.Internal.InternalEntityEntry..ctor(InternalContext internalContext, Object entity)
   at System.Data.Entity.DbContext.Entry[TEntity](TEntity entity)
   at Support_Ticket_System.SupportTicketSystem.AddTicket() in C:\Users\Joshua Rauch\source\repos\.Net-Database-Programming\Support Ticket System\SupportTicketSystem.cs:line 250
2018-12-10 22:30:22.6866 DEBUG Setting the display and display size...
2018-12-10 22:30:22.7415 DEBUG Starting the Program...
2018-12-10 22:30:25.0421 DEBUG Opening database connection for new ticket...
2018-12-10 22:30:40.3556 ERROR System.InvalidOperationException: The entity type List`1 is not part of the model for the current context.
   at System.Data.Entity.Internal.InternalContext.UpdateEntitySetMappingsForType(Type entityType)
   at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)
   at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()
   at System.Data.Entity.Internal.InternalEntityEntry..ctor(InternalContext internalContext, Object entity)
   at System.Data.Entity.DbContext.Entry[TEntity](TEntity entity)
   at Support_Ticket_System.SupportTicketSystem.AddTicket() in C:\Users\Joshua Rauch\source\repos\.Net-Database-Programming\Support Ticket System\SupportTicketSystem.cs:line 250
2018-12-10 22:31:25.0114 DEBUG Setting the display and display size...
2018-12-10 22:31:25.0702 DEBUG Starting the Program...
2018-12-10 22:31:26.8094 DEBUG Opening database connection for new ticket...
2018-12-10 22:35:29.9419 DEBUG Setting the display and display size...
2018-12-10 22:35:30.0426 DEBUG Starting the Program...
2018-12-10 22:35:32.1710 DEBUG Opening database connection for new ticket...
2018-12-10 22:36:06.8685 ERROR System.InvalidOperationException: Attaching an entity of type 'Support_Ticket_System.User' failed because another entity of the same type already has the same primary key value. This can happen when using the 'Attach' method or setting the state of an entity to 'Unchanged' or 'Modified' if any entities in the graph have conflicting key values. This may be because some entities are new and have not yet received database-generated key values. In this case use the 'Add' method or the 'Added' entity state to track the graph and then set the state of non-new entities to 'Unchanged' or 'Modified' as appropriate.
   at System.Data.Entity.Core.Objects.ObjectContext.VerifyRootForAdd(Boolean doAttach, String entitySetName, IEntityWrapper wrappedEntity, EntityEntry existingEntry, EntitySet& entitySet, Boolean& isNoOperation)
   at System.Data.Entity.Core.Objects.ObjectContext.AttachTo(String entitySetName, Object entity)
   at System.Data.Entity.Internal.Linq.InternalSet`1.<>c__DisplayClass2.<Attach>b__1()
   at System.Data.Entity.Internal.Linq.InternalSet`1.ActOnSet(Action action, EntityState newState, Object entity, String methodName)
   at System.Data.Entity.Internal.Linq.InternalSet`1.Attach(Object entity)
   at System.Data.Entity.Internal.InternalEntityEntry.set_State(EntityState value)
   at System.Data.Entity.Infrastructure.DbEntityEntry`1.set_State(EntityState value)
   at Support_Ticket_System.SupportTicketSystem.AddTicket() in C:\Users\Joshua Rauch\source\repos\.Net-Database-Programming\Support Ticket System\SupportTicketSystem.cs:line 252
2018-12-10 22:38:34.7007 DEBUG Setting the display and display size...
2018-12-10 22:38:34.7506 DEBUG Starting the Program...
2018-12-10 22:38:36.7343 DEBUG Opening database connection for new ticket...
2018-12-10 22:39:02.7046 ERROR System.InvalidOperationException: Attaching an entity of type 'Support_Ticket_System.User' failed because another entity of the same type already has the same primary key value. This can happen when using the 'Attach' method or setting the state of an entity to 'Unchanged' or 'Modified' if any entities in the graph have conflicting key values. This may be because some entities are new and have not yet received database-generated key values. In this case use the 'Add' method or the 'Added' entity state to track the graph and then set the state of non-new entities to 'Unchanged' or 'Modified' as appropriate.
   at System.Data.Entity.Core.Objects.ObjectContext.VerifyRootForAdd(Boolean doAttach, String entitySetName, IEntityWrapper wrappedEntity, EntityEntry existingEntry, EntitySet& entitySet, Boolean& isNoOperation)
   at System.Data.Entity.Core.Objects.ObjectContext.AttachTo(String entitySetName, Object entity)
   at System.Data.Entity.Internal.Linq.InternalSet`1.<>c__DisplayClass2.<Attach>b__1()
   at System.Data.Entity.Internal.Linq.InternalSet`1.ActOnSet(Action action, EntityState newState, Object entity, String methodName)
   at System.Data.Entity.Internal.Linq.InternalSet`1.Attach(Object entity)
   at System.Data.Entity.Internal.InternalEntityEntry.set_State(EntityState value)
   at System.Data.Entity.Infrastructure.DbEntityEntry`1.set_State(EntityState value)
   at Support_Ticket_System.SupportTicketSystem.AddTicket() in C:\Users\Joshua Rauch\source\repos\.Net-Database-Programming\Support Ticket System\SupportTicketSystem.cs:line 252
2018-12-10 22:40:06.9392 DEBUG Setting the display and display size...
2018-12-10 22:40:06.9751 DEBUG Starting the Program...
2018-12-10 22:40:09.4270 DEBUG Opening database connection for new ticket...
2018-12-10 22:40:33.3411 ERROR System.ComponentModel.Win32Exception (0x80004005): The network path was not found
2018-12-10 22:40:38.6862 DEBUG Opening database connection for new ticket...
2018-12-10 22:42:08.5359 DEBUG Setting the display and display size...
2018-12-10 22:42:08.6067 DEBUG Starting the Program...
2018-12-10 22:42:12.2633 DEBUG Opening database connection for new ticket...
2018-12-10 22:46:58.0470 DEBUG Setting the display and display size...
2018-12-10 22:46:58.1148 DEBUG Starting the Program...
2018-12-10 22:46:59.4392 DEBUG Opening database connection for new ticket...
2018-12-10 22:48:35.4316 ERROR System.InvalidOperationException: Attaching an entity of type 'Support_Ticket_System.User' failed because another entity of the same type already has the same primary key value. This can happen when using the 'Attach' method or setting the state of an entity to 'Unchanged' or 'Modified' if any entities in the graph have conflicting key values. This may be because some entities are new and have not yet received database-generated key values. In this case use the 'Add' method or the 'Added' entity state to track the graph and then set the state of non-new entities to 'Unchanged' or 'Modified' as appropriate.
   at System.Data.Entity.Core.Objects.ObjectContext.VerifyRootForAdd(Boolean doAttach, String entitySetName, IEntityWrapper wrappedEntity, EntityEntry existingEntry, EntitySet& entitySet, Boolean& isNoOperation)
   at System.Data.Entity.Core.Objects.ObjectContext.AttachTo(String entitySetName, Object entity)
   at System.Data.Entity.Internal.Linq.InternalSet`1.<>c__DisplayClass2.<Attach>b__1()
   at System.Data.Entity.Internal.Linq.InternalSet`1.ActOnSet(Action action, EntityState newState, Object entity, String methodName)
   at System.Data.Entity.Internal.Linq.InternalSet`1.Attach(Object entity)
   at System.Data.Entity.Internal.InternalEntityEntry.set_State(EntityState value)
   at System.Data.Entity.Infrastructure.DbEntityEntry`1.set_State(EntityState value)
   at Support_Ticket_System.SupportTicketSystem.AddTicket() in C:\Users\Joshua Rauch\source\repos\.Net-Database-Programming\Support Ticket System\SupportTicketSystem.cs:line 256
2018-12-10 22:50:53.9199 DEBUG Setting the display and display size...
2018-12-10 22:50:53.9778 DEBUG Starting the Program...
2018-12-10 22:51:00.0144 DEBUG Opening database connection for new ticket...
2018-12-10 22:51:17.8608 DEBUG Adding Ticket to database...
2018-12-10 22:51:17.9056 DEBUG Saving changes to database...
2018-12-10 22:51:18.6073 ERROR System.InvalidOperationException: Saving or accepting changes failed because more than one entity of type 'Support_Ticket_System.User' have the same primary key value. Ensure that explicitly set primary key values are unique. Ensure that database-generated primary keys are configured correctly in the database and in the Entity Framework model. Use the Entity Designer for Database First/Model First configuration. Use the 'HasDatabaseGeneratedOption" fluent API or 'DatabaseGeneratedAttribute' for Code First configuration.
   at System.Data.Entity.Core.Objects.ObjectStateManager.FixupKey(EntityEntry entry)
   at System.Data.Entity.Core.Objects.EntityEntry.AcceptChanges()
   at System.Data.Entity.Core.Objects.ObjectContext.AcceptAllChanges()
   at System.Data.Entity.Core.Objects.ObjectContext.SaveChangesToStore(SaveOptions options, IDbExecutionStrategy executionStrategy, Boolean startLocalTransaction)
2018-12-10 23:13:25.2977 DEBUG Setting the display and display size...
2018-12-10 23:13:25.3486 DEBUG Starting the Program...
2018-12-10 23:13:27.2421 DEBUG Opening database connection for new ticket...
2018-12-10 23:13:48.5374 ERROR System.InvalidOperationException: The operation cannot be completed because the DbContext has been disposed.
   at System.Data.Entity.Internal.LazyInternalContext.InitializeContext()
   at System.Data.Entity.Internal.Linq.DbQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.Count[TSource](IQueryable`1 source)
   at Support_Ticket_System.SupportTicketSystem.TryGetUserByName(String subHeader, String fName, String lName, TicketDBContext db, User& user) in C:\Users\Joshua Rauch\source\repos\.Net-Database-Programming\Support Ticket System\SupportTicketSystem.cs:line 856
   at Support_Ticket_System.SupportTicketSystem.GetUserFromInput(TicketDBContext db, String subHeader, String userRole, String infoType, String previousValue, User user) in C:\Users\Joshua Rauch\source\repos\.Net-Database-Programming\Support Ticket System\SupportTicketSystem.cs:line 601
   at Support_Ticket_System.SupportTicketSystem.AddTicket() in C:\Users\Joshua Rauch\source\repos\.Net-Database-Programming\Support Ticket System\SupportTicketSystem.cs:line 243
2018-12-10 23:15:14.4327 DEBUG Setting the display and display size...
2018-12-10 23:15:14.5015 DEBUG Starting the Program...
2018-12-10 23:15:15.8699 DEBUG Opening database connection for new ticket...
2018-12-10 23:15:44.0949 ERROR System.InvalidOperationException: The operation cannot be completed because the DbContext has been disposed.
   at System.Data.Entity.Internal.LazyInternalContext.InitializeContext()
   at System.Data.Entity.Internal.Linq.DbQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.Count[TSource](IQueryable`1 source)
   at Support_Ticket_System.SupportTicketSystem.TryGetUserByName(String subHeader, String fName, String lName, TicketDBContext db, User& user) in C:\Users\Joshua Rauch\source\repos\.Net-Database-Programming\Support Ticket System\SupportTicketSystem.cs:line 856
   at Support_Ticket_System.SupportTicketSystem.GetUserFromInput(TicketDBContext db, String subHeader, String userRole, String infoType, String previousValue, User user) in C:\Users\Joshua Rauch\source\repos\.Net-Database-Programming\Support Ticket System\SupportTicketSystem.cs:line 601
   at Support_Ticket_System.SupportTicketSystem.AddTicket() in C:\Users\Joshua Rauch\source\repos\.Net-Database-Programming\Support Ticket System\SupportTicketSystem.cs:line 243
2018-12-10 23:16:56.6297 DEBUG Setting the display and display size...
2018-12-10 23:16:56.6826 DEBUG Starting the Program...
2018-12-10 23:16:58.0589 DEBUG Opening database connection for new ticket...
2018-12-10 23:17:29.3236 DEBUG Adding Ticket to database...
2018-12-10 23:17:29.4014 DEBUG Saving changes to database...
